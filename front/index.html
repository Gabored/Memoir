<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style-index.css">
    <title>Memoir - Inicio</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-italic">Memoir</i>
            </div>
            <ul class="sidebar-menu">
                <li><img src="/assets/casa-icon.png" alt="Inicio"><span>Inicio</span></li>
                <li><img src="..\media\corazon-icon.png" alt="Me gustan"><span>Me gustan</span></li>
                <li><img src="..\media\campana-icon.png" alt="Notificaciones"><span>Notificaciones</span></li>
                <li><img src="..\media\user-icon.png" alt="Cuenta"><span>Cuenta</span></li>
                <li><img src="..\media\config-icon.png" alt="Configuración"><span>Configuración</span></li>
            </ul>
        </div>
        <div class="main-content">
            <!-- Contenido de la página principal -->
            <header class="main-header">
                <a href="/crear-memoria"> 
                    <img id="add-icon" src="..\media\add-icon.png" alt="Crear memoria">
                </a>
            </header>
            <!-- Inicio de la sección de memoria -->
            <div class="memoria">
                <div class="usuario-info">
                    <img src="..\media\user-icon.png" alt="Usuario">
                    <span>marian.sedano</span>
                </div>
                <div class="memoria-images">
                    <img class="memoria-image" src="..\media\memoria1-1.jpeg" alt="Memoria 1">
                    <img class="memoria-image" src="..\media\memoria1-2.jpeg" alt="Memoria 2">
                    <img class="memoria-image" src="..\media\memoria1-3.jpeg" alt="Memoria 3">
                    <img class="memoria-image" src="..\media\memoria1-4.jpeg" alt="Memoria 4">
                </div>
                <div class="memoria-info">
                    <h2>Bonito Sevilla</h2>
                    <p>Les cuento un poco de mi viaje de verano, que tuve una parada en la Plaza de España en Sevilla.</p>
                    <div class="hashtags">
                        <span>#Sevilla</span>
                    </div>
                </div>
                <div class="reacciones">
                    <img src="..\media\corazon-icon.png" alt="Me gusta">
                    <img src="..\media\comentario-icon.png" alt="Comentario">
                    <img src="..\media\descargar-icon.png" alt="Descargar">
                </div>
            </div>
            <!-- Fin de la sección de memoria -->
        </div>
        <ul class="sidebar-right-menu">
            <li>
                <img src="..\media\lupa-icon.png" alt="Buscar">
                <span>Buscar</span>
                <input type="text" id="searchHashtag" placeholder="Buscar hashtag">
            </li>
            <li>
                <div id="filteredHashtags"></div>
            </li>
            <li>
                <a href="explorar.html">
                    <img src="..\media\mundo-icon.png" alt="Explorar">
                    <span>Explorar</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2023 Memoir, Inc</p>
    </footer>

    <script>
        function loadHashtags(query) {
            let url = 'http://localhost:5001/hashtags';
            if (query) {
                url = 'http://localhost:5001/hashtags/search/' + query;
            }

            $.ajax({
                url: url,
                type: 'GET',
                dataType: 'json',
                success: (data) => {
                    let html = '';
                    if (Array.isArray(data) && data.length > 0) {
                        html = '<ul>';
                        data.forEach(hashtag => {
                            html += `<li>${hashtag.name} - <img class="hashtag-img" src="${hashtag.img}" alt="${hashtag.name}"></li>`;
                        });
                        html += '</ul>';
                    } else {
                        html = '<p>No se encontraron hashtags</p>';
                    }
                    $('#filteredHashtags').html(html);
                },
                error: (xhr, status, error) => {
                    console.error('Error al obtener la lista de hashtags:', error);
                }
            });
        }

        $(function(){
            $('#searchHashtag').on('keyup', function() {
                loadHashtags(this.value);
            });
        });
    </script>
</body>
</html>
